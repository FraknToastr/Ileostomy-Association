<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Ileostomy Association Calendar</title>
<style>
  :root { --accent1:#667eea; --accent2:#764ba2; --overlay: rgba(0,0,0,.45); }
  *{margin:0;padding:0;box-sizing:border-box;}
  html{font-size:16px;}
  body{
    font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;
    background:linear-gradient(135deg,var(--accent1) 0%,var(--accent2) 100%);
    min-height:100vh;padding:6px;
  }
  .container{max-width:1200px;margin:0 auto;background:#fff;border-radius:12px;
    box-shadow:0 10px 30px rgba(0,0,0,.25);overflow:hidden;}
  .header{background:linear-gradient(135deg,var(--accent1) 0%,var(--accent2) 100%);
    color:#fff;padding:14px;text-align:center;}
  .header h1{font-size:1.6em;margin-bottom:4px;}
  .header p{font-size:.9em;}
  .main-content{display:flex;flex-wrap:wrap;}
  .sidebar{width:250px;background:#f8f9fa;padding:14px;border-right:1px solid #e0e0e0;}
  .sidebar h2{color:var(--accent1);font-size:1.15em;margin-bottom:10px;}
  .filter-btn,.today-btn{border-radius:8px;border:none;font-size:.9em;transition:.3s;}
  .today-btn{width:100%;padding:11px;background:linear-gradient(135deg,var(--accent1) 0%,var(--accent2) 100%);
    color:#fff;font-weight:bold;margin-bottom:14px;}
  .today-btn:hover{transform:translateY(-2px);box-shadow:0 3px 10px rgba(102,126,234,.4);}
  .filter-btn{display:flex;align-items:center;width:100%;padding:8px 11px;border:1px solid #ddd;
    background:#fff;margin-bottom:7px;cursor:pointer;}
  .filter-btn:hover{transform:translateX(4px);box-shadow:0 3px 8px rgba(0,0,0,.1);}
  .filter-btn.active{background:var(--accent1);color:#fff;border-color:var(--accent1);}
  .color-indicator{width:15px;height:15px;margin-right:6px;border-radius:3px;border:1px solid rgba(0,0,0,.1);}
  .calendar-section{flex:1;padding:10px;}
  .calendar-nav{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;gap:6px;}
  .calendar-nav button{background:var(--accent1);color:white;border:none;padding:7px 13px;border-radius:6px;
    font-size:.9em;cursor:pointer;transition:.3s;}
  .calendar-nav button:hover{background:var(--accent2);transform:translateY(-1px);}
  .calendar-nav h2{color:#333;font-size:1.3em;}
  .calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:3px;}
  .day-header{
    text-align:center;font-weight:700;color:var(--accent1);
    background:#f8f9fa;border-radius:6px;
    font-size:1.6em;padding:10px 4px;
  }
  .day{
    border:1px solid #e0e0e0;border-radius:6px;padding:2px 3px;cursor:default;
    display:flex;flex-direction:column;justify-content:space-between;
    transition:.25s;background:#fff;min-height:55px;
  }
  .day:hover{transform:scale(1.03);box-shadow:0 4px 8px rgba(0,0,0,.15);z-index:2;}
  .day.other-month{opacity:.3;}
  .day-number{font-size:.9em;font-weight:bold;color:#333;}
  .day-events{
    font-size:.8em;font-weight:600;color:#333;margin-top:auto;line-height:1.3em;
    display:flex;align-items:center;gap:4px;flex-wrap:wrap;justify-content:flex-start;
  }
  .day-events .emoji{font-size:1.5em;line-height:1em;}
  .day.open-day,
  .day.clinic-day{background:linear-gradient(135deg,#84fab0 0%,#8fd3f4 100%);}
  .day.bbq-day{background:linear-gradient(135deg,#ffd93d 0%,#ff6b35 100%);}
  .day.agm-day{background:linear-gradient(135deg,#a8edea 0%,#fed6e3 100%);}
  .day.admin-day{background:linear-gradient(135deg,#ffecd2 0%,#fcb69f 100%);}
  .day.closure-day{background:linear-gradient(135deg,#ff6b6b 0%,#c92a2a 100%);color:white;}
  .day.today{border:3px solid var(--accent1);box-shadow:0 0 6px rgba(102,126,234,0.6);z-index:3;}
  .day.hidden{opacity:.15;pointer-events:none;}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>ğŸ¥ Ileostomy Association Calendar</h1>
    <p>Supporting our community with care and compassion</p>
  </div>
  <div class="main-content">
    <div class="sidebar">
      <h2>Filter Events</h2>
      <button class="today-btn" id="todayBtn">ğŸ“… Back to Today</button>
      <div class="filter-group">
        <button class="filter-btn" data-filter="open"><span class="color-indicator" style="background:linear-gradient(135deg,#84fab0 0%,#8fd3f4 100%)"></span>ğŸ  Open</button>
        <button class="filter-btn" data-filter="clinic"><span class="color-indicator" style="background:linear-gradient(135deg,#84fab0 0%,#8fd3f4 100%)"></span>ğŸ‘©â€âš•ï¸ Open/Clinic</button>
        <button class="filter-btn" data-filter="bbq"><span class="color-indicator" style="background:linear-gradient(135deg,#fa709a 0%,#fee140 100%)"></span>ğŸ” Paul Martin BBQ</button>
        <button class="filter-btn" data-filter="agm"><span class="color-indicator" style="background:linear-gradient(135deg,#a8edea 0%,#fed6e3 100%)"></span>ğŸ§¾ AGM</button>
        <button class="filter-btn" data-filter="admin"><span class="color-indicator" style="background:linear-gradient(135deg,#ffecd2 0%,#fcb69f 100%)"></span>ğŸ˜´ Closed</button>
        <button class="filter-btn" data-filter="closure"><span class="color-indicator" style="background:linear-gradient(135deg,#ff6b6b 0%,#c92a2a 100%)"></span>ğŸ… Holiday Closure</button>
      </div>
    </div>
    <div class="calendar-section">
      <div class="calendar-nav">
        <button id="prevMonth">â† Prev</button>
        <h2 id="monthYear"></h2>
        <button id="nextMonth">Next â†’</button>
      </div>
      <div class="calendar" id="calendar"></div>
    </div>
  </div>
</div>

<script>
let currentDate = new Date();
const filters = {open:false,clinic:false,bbq:false,agm:false,admin:false,closure:false};
const AGM_DATE = new Date(2025,8,15);
const dayHeaders = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];

const emojiMap = {
  open:"ğŸ ",
  clinic:"ğŸ‘©â€âš•ï¸",
  bbq:"ğŸ”",
  agm:"ğŸ§¾",
  admin:"ğŸ˜´",
  closure:"ğŸ…"
};

function isOpenDay(d){const g=d.getDay(),dom=d.getDate();
  if(g===4||g===0)return false;
  if(g===6){const w=Math.ceil(dom/7);return!(w===2||w===4);}
  return [1,2,3,5].includes(g);
}
function isBBQDay(d){const m=d.getMonth(),g=d.getDay(),dom=d.getDate();
  return g===0&&dom<=7&&[0,3,6,9].includes(m);}
const isAGMDay=d=>d.toDateString()===AGM_DATE.toDateString();
const isAdminDay=d=>{const g=d.getDay(),dom=d.getDate(),w=Math.ceil(dom/7);
  return g===4||g===0||(g===6&&(w===2||w===4));};
function isClosureDay(d){const m=d.getMonth(),dom=d.getDate();
  return (m===11&&dom>=25)||(m===0&&dom<=2);}

function getEventTypes(date){
  const types=[];
  if(isClosureDay(date))types.push("closure");
  if(isAGMDay(date))types.push("agm");
  if(isBBQDay(date))types.push("bbq");
  if(isAdminDay(date))types.push("admin");
  if(isOpenDay(date)){
    const d=date.getDay();
    if(d===1||d===3){types.push("open","clinic");}
    else{types.push("open");}
  }
  return [...new Set(types)];
}

function getEventLabel(types){
  if(types.includes("closure"))return "Closed (Holiday)";
  if(types.includes("admin"))return "Closed";
  if(types.includes("clinic"))return "Open/Clinic";
  if(types.includes("open"))return "Open";
  if(types.includes("agm"))return "AGM";
  if(types.includes("bbq"))return "Paul Martin BBQ";
  return "";
}

function renderCalendar(){
  const y=currentDate.getFullYear(),m=currentDate.getMonth(),today=new Date();
  document.getElementById("monthYear").textContent=currentDate.toLocaleDateString("en-US",{month:"long",year:"numeric"});
  const firstDay=new Date(y,m,1).getDay();
  const daysInMonth=new Date(y,m+1,0).getDate();
  const prevDays=new Date(y,m,0).getDate();
  const cal=document.getElementById("calendar");cal.innerHTML="";
  dayHeaders.forEach(d=>{const h=document.createElement("div");h.className="day-header";h.textContent=d;cal.appendChild(h);});

  const renderDay=(date,offset=0)=>{
    const day=document.createElement("div");
    const types=getEventTypes(date);
    const label=getEventLabel(types);
    const cls=["day"];
    if(types.includes("closure"))cls.push("closure-day");
    else if(types.includes("admin"))cls.push("admin-day");
    else if(types.includes("clinic"))cls.push("clinic-day");
    else if(types.includes("open"))cls.push("open-day");
    else if(types.includes("bbq"))cls.push("bbq-day");
    else if(types.includes("agm"))cls.push("agm-day");
    if(offset!==0)cls.push("other-month");
    if(date.toDateString()===today.toDateString())cls.push("today");
    if(Object.values(filters).some(v=>v)&&(!types.some(t=>filters[t])))cls.push("hidden");
    day.className=cls.join(" ");
    day.dataset.day=date.getDate();
    day.dataset.offset=offset;
    const emojiHTML = types.map(t=>`<span class='emoji'>${emojiMap[t]||""}</span>`).join(" ");
    day.innerHTML=`<div class="day-number">${date.getDate()}</div>${label?`<div class="day-events">${emojiHTML} ${label}</div>`:""}`;
    return day;
  };

  for(let i=firstDay-1;i>=0;i--)cal.appendChild(renderDay(new Date(y,m-1,prevDays-i),-1));
  for(let i=1;i<=daysInMonth;i++)cal.appendChild(renderDay(new Date(y,m,i),0));
  const total=cal.children.length-7;
  for(let i=1;i<=42-total-7;i++)cal.appendChild(renderDay(new Date(y,m+1,i),1));
}

document.getElementById("prevMonth").onclick=()=>{currentDate.setMonth(currentDate.getMonth()-1);renderCalendar();};
document.getElementById("nextMonth").onclick=()=>{currentDate.setMonth(currentDate.getMonth()+1);renderCalendar();};
document.getElementById("todayBtn").onclick=()=>{currentDate=new Date();renderCalendar();};

document.querySelectorAll(".filter-btn").forEach(btn=>{
  btn.addEventListener("click",()=>{
    const f=btn.dataset.filter;filters[f]=!filters[f];btn.classList.toggle("active");
    renderCalendar();
  });
});

renderCalendar();
</script>
</body>
</html>
