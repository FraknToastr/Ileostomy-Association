<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Ileostomy Association Calendar — v9.5a</title>

<style>
:root{--accent1:#667eea;--accent2:#764ba2}
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;
  background:linear-gradient(135deg,var(--accent1),var(--accent2));
  min-height:100vh;padding:6px
}
.container{max-width:1200px;margin:0 auto;background:#fff;border-radius:12px;
  box-shadow:0 10px 30px rgba(0,0,0,.25);overflow:hidden}
.header{background:linear-gradient(135deg,var(--accent1),var(--accent2));
  color:#fff;padding:14px;text-align:center}
.header h1{font-size:1.6em;margin-bottom:4px}
.main-content{display:flex;flex-wrap:wrap}
.sidebar{width:260px;background:#f8f9fa;padding:14px;border-right:1px solid #e0e0e0}
.sidebar h2{color:var(--accent1);font-size:1.15em;margin-bottom:10px}
.filter-group{display:flex;flex-direction:column;gap:6px}
.filter-row{display:flex;align-items:center;gap:6px}
.filter-btn,.today-btn{border-radius:8px;border:none;font-size:.9em;transition:.3s}
.today-btn{width:100%;padding:11px;background:linear-gradient(135deg,var(--accent1),var(--accent2));
  color:#fff;font-weight:bold;margin-bottom:14px}
.today-btn:hover{transform:translateY(-2px);box-shadow:0 3px 10px rgba(102,126,234,.4)}
.filter-btn{flex:1;display:flex;align-items:center;justify-content:flex-start;
  padding:8px 11px;border:1px solid #ddd;background:#fff;cursor:pointer}
.filter-btn:hover{transform:translateX(4px);box-shadow:0 3px 8px rgba(0,0,0,.1)}
.filter-btn.active{background:var(--accent1);color:#fff;border-color:var(--accent1)}
.color-indicator{width:15px;height:15px;margin-right:6px;border-radius:3px;border:1px solid rgba(0,0,0,.1)}
.next-btn{padding:6px 10px;border:none;border-radius:6px;
  background:linear-gradient(135deg,var(--accent1),var(--accent2));
  color:#fff;font-size:.8em;cursor:pointer;white-space:nowrap}
.calendar-section{flex:1;padding:10px}
.calendar-nav{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.calendar-nav button{background:var(--accent1);color:#fff;border:none;padding:7px 13px;
  border-radius:6px;font-size:.9em;cursor:pointer}
.calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:3px}
.day-header{text-align:center;font-weight:700;color:var(--accent1);
  background:#f8f9fa;border-radius:6px;font-size:1.6em;padding:10px 4px}
.day{border:1px solid #e0e0e0;border-radius:6px;padding:4px 5px;
  display:flex;flex-direction:column;justify-content:space-between;
  background:#fff;min-height:70px}
.day.other-month{opacity:.3}
.day-number{font-size:.9em;font-weight:bold}
.day-events{
  font-size:.8em;font-weight:600;
  display:flex;flex-direction:column;align-items:flex-start;
  gap:4px;margin-top:auto
}

/* colours */
.day.open-day,.day.clinic-day{background:linear-gradient(135deg,#84fab0,#8fd3f4)}
.day.admin-day,.day.closed-day{background:linear-gradient(135deg,#ffecd2,#fcb69f)}
.day.closure-day{background:linear-gradient(135deg,#ff6b6b,#c92a2a);color:#fff}
.day.easter-day{background:linear-gradient(135deg,#7b4397,#4a148c);color:#fff}
.day.publicholiday-day{background:linear-gradient(135deg,#43cea2,#185a9d);color:#fff}
.day.bbq-day{background:linear-gradient(135deg,#ffd93d,#ff6b35)}
.day.agm-day{background:linear-gradient(135deg,#99f2c8,#f9f586,#f6d365)}
.day.education-day{background:linear-gradient(135deg,#b2fefa,#0ed2f7)}
.day.committee-day{background:linear-gradient(135deg,#ff4fd8,#ff0080);color:#fff}
.day.today{border:3px solid var(--accent1)}

@media(max-width:600px){
  .day-header{font-size:1em}
  .day-events{font-size:.6em}
}
</style>
</head>

<body>
<div class="container">
  <div class="header">
    <h1>Ileostomy Association Calendar</h1>
    <p>Supporting our community with care and compassion</p>
  </div>

  <div class="main-content">
    <div class="sidebar">
      <h2>Filter Events</h2>
      <button class="today-btn" id="todayBtn">Back to Today</button>

      <div class="filter-group">
        <button class="filter-btn" data-filter="open">
          <span class="color-indicator" style="background:#84fab0"></span>Open
        </button>
        <button class="filter-btn" data-filter="clinic">
          <span class="color-indicator" style="background:#8fd3f4"></span>Open/Clinic
        </button>

        <div class="filter-row">
          <button class="filter-btn" data-filter="bbq">
            <span class="color-indicator" style="background:#ffd93d"></span>Paul Martin BBQ
          </button>
          <button class="next-btn" id="nextBBQ">Next →</button>
        </div>

        <div class="filter-row">
          <button class="filter-btn" data-filter="committee">
            <span class="color-indicator" style="background:#ff4fd8"></span>Committee
          </button>
          <button class="next-btn" id="nextCommittee">Next →</button>
        </div>

        <div class="filter-row">
          <button class="filter-btn" data-filter="publicholiday">
            <span class="color-indicator" style="background:#43cea2"></span>Public Holidays
          </button>
          <button class="next-btn" id="nextPublicHoliday">Next →</button>
        </div>

        <div class="filter-row">
          <button class="filter-btn" data-filter="education">
            <span class="color-indicator" style="background:#b2fefa"></span>Education Days
          </button>
          <button class="next-btn" id="nextEducation">Next →</button>
        </div>

        <div class="filter-row">
          <button class="filter-btn" data-filter="agm">
            <span class="color-indicator" style="background:#f6d365"></span>AGM
          </button>
          <button class="next-btn" id="nextAGM">Next →</button>
        </div>

        <div class="filter-row">
          <button class="filter-btn" data-filter="easter">
            <span class="color-indicator" style="background:#7b4397"></span>Easter
          </button>
          <button class="next-btn" id="nextEaster">Next →</button>
        </div>

        <div class="filter-row">
          <button class="filter-btn" data-filter="closure">
            <span class="color-indicator" style="background:#ff6b6b"></span>Christmas/New Years
          </button>
          <button class="next-btn" id="nextClosure">Next →</button>
        </div>
      </div>
    </div>

    <div class="calendar-section">
      <div class="calendar-nav">
        <button id="prevMonth">← Prev</button>
        <h2 id="monthYear"></h2>
        <button id="nextMonth">Next →</button>
      </div>
      <div class="calendar" id="calendar"></div>
    </div>
  </div>
</div>

<script>
let currentDate=new Date();
const filters={open:false,clinic:false,bbq:false,committee:false,education:false,agm:false,publicholiday:false,easter:false,closure:false};

const BBQ_DATES=[new Date(2026,1,15),new Date(2026,5,14),new Date(2026,10,15)];
const AGM_DATE=new Date(2026,9,18);

const PUBLIC_HOLIDAYS_2026=new Set(["2026-01-26","2026-03-09","2026-06-08","2026-10-05"]);

/* SURGICAL CHANGE APPLIED HERE */
const EDUCATION_2026={
  "2026-05-21":"Murray Bridge",
  "2026-06-18":"Clare",
  "2026-07-23":"Metro",
  "2026-08-06":"Barossa",
  "2026-08-20":"Morphett Vale",
  "2026-09-17":"Mt Gambier",
  "2026-10-15":"Kadina",
  "2026-11-19":"Whyalla"
};

function isCommitteeDay(d){return d.getDay()===1&&Math.ceil(d.getDate()/7)===3}
function isClinicDay(d){return d.getDay()===3||(d.getDay()===6&&Math.ceil(d.getDate()/7)===3)}
function isOpenDay(d){return[1,2,3,5].includes(d.getDay())||(d.getDay()===6&&Math.ceil(d.getDate()/7)===3)}
function isAdminDay(d){return d.getDay()===4}
function isClosedNonAdmin(d){return d.getDay()===0||(d.getDay()===6&&Math.ceil(d.getDate()/7)!==3)}
function pad(n){return n.toString().padStart(2,"0")}
function keyFor(d){return`${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`}
function inBBQ(d){return BBQ_DATES.some(x=>x.toDateString()===d.toDateString())}
function isPublicHoliday(d){return PUBLIC_HOLIDAYS_2026.has(keyFor(d))}
function isEducationDay(d){return EDUCATION_2026[keyFor(d)]}

function getEventTypes(d){
  const t=[];
  if(isPublicHoliday(d))return["publicholiday"];
  if(d.toDateString()===AGM_DATE.toDateString())t.push("agm");
  if(inBBQ(d))t.push("bbq");
  if(isEducationDay(d))t.push("education");
  if(isCommitteeDay(d))t.push("committee");
  if(isAdminDay(d))t.push("admin");
  if(isClosedNonAdmin(d))t.push("closed");
  if(isClinicDay(d))t.push("clinic");
  else if(isOpenDay(d))t.push("open");
  return[...new Set(t)]
}

function pickClass(t){
  if(t.includes("publicholiday"))return"publicholiday-day";
  if(t.includes("agm"))return"agm-day";
  if(t.includes("bbq"))return"bbq-day";
  if(t.includes("education"))return"education-day";
  if(t.includes("committee"))return"committee-day";
  if(t.includes("admin"))return"admin-day";
  if(t.includes("closed"))return"closed-day";
  if(t.includes("clinic"))return"clinic-day";
  if(t.includes("open"))return"open-day";
  return"";
}

function getEventLines(t,d){
  const lines=[];
  if(t.includes("agm"))lines.push("AGM");
  if(t.includes("bbq"))lines.push("BBQ");
  if(t.includes("education"))lines.push(`Education: ${EDUCATION_2026[keyFor(d)]}`);
  if(t.includes("committee"))lines.push("Committee");
  if(t.includes("clinic"))lines.push("Open/Clinic");
  else if(t.includes("open"))lines.push("Open");
  if(t.includes("admin"))lines.push("Closed (Admin Day)");
  if(t.includes("closed"))lines.push("Closed");
  return lines;
}

function renderCalendar(){
  const y=currentDate.getFullYear(),m=currentDate.getMonth();
  document.getElementById("monthYear").textContent=currentDate.toLocaleDateString("en-US",{month:"long",year:"numeric"});
  const cal=document.getElementById("calendar");cal.innerHTML="";
  ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].forEach(h=>{
    const e=document.createElement("div");e.className="day-header";e.textContent=h;cal.appendChild(e)
  });
  const first=new Date(y,m,1).getDay(),days=new Date(y,m+1,0).getDate();
  const prev=new Date(y,m,0).getDate();
  function dayBox(d,o){
    const t=getEventTypes(d),cls=["day",pickClass(t)];
    if(o)cls.push("other-month");
    const div=document.createElement("div");div.className=cls.join(" ");
    const lines=getEventLines(t,d);
    div.innerHTML=`<div class="day-number">${d.getDate()}</div>`+
      (lines.length?`<div class="day-events">${lines.map(l=>`<div>${l}</div>`).join("")}</div>`:"");
    return div
  }
  for(let i=0;i<first;i++)cal.appendChild(dayBox(new Date(y,m-1,prev-first+i+1),1));
  for(let i=1;i<=days;i++)cal.appendChild(dayBox(new Date(y,m,i),0));
  while(cal.children.length<49)cal.appendChild(dayBox(new Date(y,m+1,cal.children.length-6),1))
}

document.getElementById("prevMonth").onclick=()=>{currentDate.setMonth(currentDate.getMonth()-1);renderCalendar()}
document.getElementById("nextMonth").onclick=()=>{currentDate.setMonth(currentDate.getMonth()+1);renderCalendar()}
document.getElementById("todayBtn").onclick=()=>{currentDate=new Date();renderCalendar()}
renderCalendar();
</script>
</body>
</html>